---
layout: post
title: "内存：大页"
category: kernel
date: 2024-07-24 21:00:00 +0800
---

## hugetlb

可以通过内核启动参数配置大页预留池，通过mmap()的方式指定HUGETLB、匿名大页时从预留池中获取，专款专用。

## tmpfs/shmem

tmpfs主要是基于shmem实现的，在挂载tmpfs时，可以通过`-o huge=always`使tmpfs下的文件强制使用大页。

<https://aijishu.com/a/1060000000451498>

* tmpfs使用的大页是透明大页

## 复合页

复合页是由物理上连续的多个普通页组成的，在内核的视角中当作是`1`个特殊的内存页对待。

复合页的第一个页称为首页，剩下的所有页称为尾页。尾页都会包含一个指向首页的指针。

在申请完复合页所需的普通页之后，需要按照复合页的逻辑组合这些页。
